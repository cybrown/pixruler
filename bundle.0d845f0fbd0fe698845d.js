webpackJsonp([0],{GcMe:function(t,e){},JkW7:function(t,e,n){"use strict";function a(t,e,n){return 4*(t+e*n)}function o(t,e,n){var o=a(e,n,t.width);return[t.data[o],t.data[o+1],t.data[o+2],t.data[o+3]]}function i(t,e,n){return!(r(t,e)>n)}function r(t,e){for(var n=0,a=0;a<4;a++)n+=Math.pow(t[a]-e[a],2);return Math.sqrt(n)}function s(t,e,n,a){return void 0===a&&(a=0),{bottom:p(t,e,n,t.height,a),height:m(t,e,n,t.height,a),left:E(t,e,n,a),right:b(t,e,n,t.width,a),top:g(t,e,n,a),width:w(t,e,n,t.width,a)}}function l(t,e,n,a,o,i){var r=c(t,e,n,a,o,i),s=h(t,e,n,a,o,i),l=u(t,e,n,a,o,i),d=f(t,e,n,a,o,i);return{top:r,left:s,bottom:l,right:d,width:d-s+1,height:l-r+1}}function c(t,e,n,a,i,r){for(var s=o(t,n,a),l=a;l<r;l++)if(!d(t,s,e,n,i,l))return l;return r}function u(t,e,n,a,i,r){for(var s=o(t,n,a),l=r;l>a;l--)if(!d(t,s,e,n,i,l))return l;return a}function h(t,e,n,a,i,r){for(var s=o(t,n,a),l=n;l<i;l++)if(!v(t,s,e,a,r,l))return l;return i}function f(t,e,n,a,i,r){for(var s=o(t,n,a),l=i;l>n;l--)if(!v(t,s,e,a,r,l))return l;return n}function d(t,e,n,a,r,s){for(var l=a;l<r;l++)if(!i(e,o(t,l,s),n))return!1;return!0}function v(t,e,n,a,r,s){for(var l=a;l<r;l++)if(!i(e,o(t,s,l),n))return!1;return!0}function g(t,e,n,a){for(var r=o(t,e,n),s=n-1;0!=s;){if(!i(o(t,e,s),r,a))return s+1;s--}return s}function p(t,e,n,a,r){for(var s=o(t,e,n),l=n+1;l<a;){if(!i(o(t,e,l),s,r))return l-1;l++}return l}function m(t,e,n,a,o){var i=g(t,e,n,o);return p(t,e,n,a,o)-i+1}function w(t,e,n,a,o){var i=E(t,e,n,o);return b(t,e,n,a,o)-i+1}function E(t,e,n,a){for(var r=o(t,e,n),s=e-1;0!=s;){if(!i(o(t,s,n),r,a))return s+1;s--}return s}function b(t,e,n,a,r){for(var s=o(t,e,n),l=e+1;l<a;){if(!i(o(t,l,n),s,r))return l-1;l++}return l}Object.defineProperty(e,"__esModule",{value:!0});var R=(n("j1ja"),n("GiK3")),D=n.n(R),y=n("O27J"),M=n.n(y),x=n("N96F"),X=n.n(x),Y=(n("GcMe"),this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}()),z=function(t){t.stopPropagation(),t.preventDefault()},C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.ctx=null,e.state={top:null,left:null,width:null,height:null,cursorX:null,cursorY:null,tolerance:0,sizeRectangle:null,tmpRectangle:null,isMouseDown:!1},e.imageData=null,e.onGrabCanvas=function(t){e.canvas=t,e.ctx=t.getContext("2d")},e.onMeasureWithPosition=function(t){var n=t.nativeEvent.offsetX,a=t.nativeEvent.offsetY;if(e.imageData){var o=s(e.imageData,n,a,e.state.tolerance),i=o.top,r=o.left,l=o.width,c=o.height;e.setState({top:i,left:r,width:l,height:c,cursorX:n,cursorY:a})}},e.onToleranceChangeHandler=function(t){e.setState({tolerance:Number(t.target.value)})},e.decrementTolerance=function(){e.setState(function(t){return{tolerance:Math.max(t.tolerance-1,0)}})},e.incrementTolerance=function(){e.setState(function(t){return{tolerance:Math.min(t.tolerance+1,510)}})},e.onStartDrawRectangle=function(t){var n=t.nativeEvent.offsetX,a=t.nativeEvent.offsetY;e.setState({tmpRectangle:{top:n,left:a,height:0,width:0},isMouseDown:!0});var o=function(t){var o=n>t.offsetX?[t.offsetX,n]:[n,t.offsetX],i=o[0],r=o[1],s=a>t.offsetY?[t.offsetY,a]:[a,t.offsetY],l=s[0],c=s[1];e.setState({tmpRectangle:{top:l,left:i,width:r-i,height:c-l}})},i=function(t){document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",o);var r=n>t.offsetX?[t.offsetX,n]:[n,t.offsetX],s=r[0],c=r[1],u=a>t.offsetY?[t.offsetY,a]:[a,t.offsetY],h=u[0],f=u[1];e.imageData?e.setState({sizeRectangle:l(e.imageData,e.state.tolerance,s,h,c,f),tmpRectangle:null,isMouseDown:!1}):alert("no image data")};document.addEventListener("mouseup",i),document.addEventListener("mousemove",o)},e}return Y(e,t),e.prototype.componentDidMount=function(){var t=this;X.a.on("paste-image",function(e){t.canvas&&t.ctx&&(t.canvas.width=e.width,t.canvas.height=e.height,t.ctx.drawImage(e,0,0),t.imageData=t.ctx.getImageData(0,0,t.canvas.width,t.canvas.height))}),["drag","dragstart","dragend","dragover","dragenter","dragleave"].map(function(t){document.addEventListener(t,z)}),document.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.files,a=document.createElement("img");a.onload=function(){window.URL.revokeObjectURL(a.src),t.canvas&&t.ctx?(t.canvas.width=0,t.canvas.height=0,t.canvas.width=a.width,t.canvas.height=a.height,t.ctx.drawImage(a,0,0),t.imageData=t.ctx.getImageData(0,0,t.canvas.width,t.canvas.height)):alert("canvas or context is null")},a.src=window.URL.createObjectURL(n[0])})},e.prototype.render=function(){return D.a.createElement("div",null,D.a.createElement("div",null,"Tolerance:",D.a.createElement("input",{type:"range",min:"0",max:"510",step:"1",value:this.state.tolerance,onChange:this.onToleranceChangeHandler}),D.a.createElement("button",{onClick:this.decrementTolerance},"-"),D.a.createElement("button",{onClick:this.incrementTolerance},"+"),"(",this.state.tolerance,")"),null==this.imageData?D.a.createElement("div",null,"Use ctrl (or cmd) + V to paste your image"):null,D.a.createElement("div",{style:{position:"relative"}},D.a.createElement("canvas",{ref:this.onGrabCanvas,onMouseMove:this.onMeasureWithPosition,onMouseDown:this.onStartDrawRectangle}),null!=this.state.cursorX&&null!=this.state.cursorY&&!1===this.state.isMouseDown?D.a.createElement("div",{style:{position:"absolute",backgroundColor:"black",color:"white",top:this.state.cursorY+16,left:this.state.cursorX+16,padding:"2px 4px",pointerEvents:"none"}},this.state.width," * ",this.state.height):null,null!=this.state.top&&null!=this.state.height&&null!=this.state.cursorX&&!1===this.state.isMouseDown?D.a.createElement("div",{style:{position:"absolute",border:"red thin solid",width:1,height:this.state.height,top:this.state.top,left:this.state.cursorX,pointerEvents:"none"}}):null,null!=this.state.left&&null!=this.state.width&&null!=this.state.cursorY&&!1===this.state.isMouseDown?D.a.createElement("div",{style:{position:"absolute",border:"red thin solid",width:this.state.width,height:1,top:this.state.cursorY,left:this.state.left,pointerEvents:"none"}}):null,null!=this.state.sizeRectangle?D.a.createElement("div",{style:{position:"absolute",border:"thin green solid",top:this.state.sizeRectangle.top,left:this.state.sizeRectangle.left,width:this.state.sizeRectangle.width,height:this.state.sizeRectangle.height,pointerEvents:"none"}}):null,null!=this.state.tmpRectangle?D.a.createElement("div",{style:{position:"absolute",border:"thin blue solid",top:this.state.tmpRectangle.top,left:this.state.tmpRectangle.left,width:this.state.tmpRectangle.width,height:this.state.tmpRectangle.height,pointerEvents:"none"}}):null,null!=this.state.sizeRectangle?D.a.createElement("div",{style:{position:"absolute",backgroundColor:"black",color:"lightgreen",top:this.state.sizeRectangle.top+16,left:this.state.sizeRectangle.left+16,padding:"2px 4px",pointerEvents:"none"}},this.state.sizeRectangle.width," * ",this.state.sizeRectangle.height):null))},e}(D.a.Component),_=document.createElement("div");document.body.appendChild(_),M.a.render(D.a.createElement(C,null),_)}},["JkW7"]);